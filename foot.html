
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Trivia Challenge (50 Q)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #008000; /* Green (Pitch) */
            --secondary-color: #f7b32c; /* Gold/Yellow (Trophy) */
            --background-color: #1e1e1e; /* Dark Background */
            --card-color: #2b2b2b; /* Card Background */
            --text-color: #ffffff;
            --wrong-color: #e74c3c; /* Red */
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: var(--background-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column; /* Allows content and footer to stack */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            line-height: 1.6;
            
            /* Football Emojis Background */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="10" y="30" font-size="35" opacity="0.6">‚öΩ</text><text x="60" y="80" font-size="35" opacity="0.6">ü•Ö</text><text x="80" y="40" font-size="35" opacity="0.6">üèÜ</text><text x="30" y="70" font-size="35" opacity="0.6">‚öΩ</text></svg>');
            background-size: 150px 150px; /* Adjust size of pattern */
            background-repeat: repeat;
            background-attachment: fixed;
            background-blend-mode: overlay;
        }

        .main-content {
            flex-grow: 1; /* Allows the main content to push the footer down */
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .quiz-container {
            background: var(--card-color);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            padding: 30px;
            width: 90%;
            max-width: 500px;
            margin: 20px;
            border: 4px solid var(--primary-color);
            animation: fadeIn 0.5s ease-out;
            position: relative;
            z-index: 10;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: var(--secondary-color);
            font-size: 2.2rem;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        #question-text {
            font-size: 1.2rem;
            margin-bottom: 25px;
            min-height: 60px; /* Reserve space */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
        }

        .answer-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            background-color: #444;
            color: var(--text-color);
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3);
            text-align: left;
            position: relative;
        }

        .btn:hover:not(:disabled) {
            background-color: #555;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 rgba(0, 0, 0, 0.3);
        }

        .btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
        }

        .btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        /* Category Selection Screen Styles */
        .start-screen h2 {
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 1.8rem;
        }

        .category-buttons .btn, .difficulty-buttons .btn {
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
            background-color: var(--primary-color);
            box-shadow: 0 4px 0 #006400;
            color: black; /* Contrast with green */
        }
        
        .category-buttons .btn:hover:not(:disabled), .difficulty-buttons .btn:hover:not(:disabled) {
            background-color: #006400;
            box-shadow: 0 6px 0 #005000;
            transform: translateY(-2px);
        }

        .difficulty-buttons .btn {
            background-color: #4a90e2; /* Blue for difficulty */
            box-shadow: 0 4px 0 #3a7acb;
            color: white;
        }

        .difficulty-buttons .btn:hover:not(:disabled) {
            background-color: #3a7acb;
            box-shadow: 0 6px 0 #2b60a3;
        }

        /* Back Button Style */
        #back-to-category-btn {
            background-color: #6c757d;
            box-shadow: 0 4px 0 #5a6268;
            color: white;
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        #back-to-category-btn:hover {
            background-color: #5a6268;
        }


        /* End Game Message Box */
        #message-box {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* Slightly darker overlay for end screen */
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            overflow-y: auto; /* Allow scrolling if message box content is too large */
        }

        .message-content {
            background: var(--card-color);
            padding: 40px 30px; /* Adjusted padding */
            border-radius: 20px;
            max-width: 500px; /* Increased max width for review list */
            width: 90%;
            border: 5px solid var(--secondary-color);
            box-shadow: 0 0 50px rgba(247, 179, 44, 0.5);
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.3s ease-out;
        }

        .message-content.show {
            transform: scale(1);
            opacity: 1;
        }

        .message-content h2 {
            color: var(--secondary-color);
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .message-content p {
            font-size: 1.1rem;
            margin-bottom: 25px;
        }
        
        /* üèÜ STYLES FOR DETAILED REVIEW BOXES (MATCHING IMAGE) */
        .review-item {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            text-align: left;
            transition: transform 0.2s;
        }

        .review-item:hover {
            transform: translateY(-2px);
        }

        .correct-box {
            background-color: var(--primary-color); /* Green */
            color: #000; /* Black text for contrast */
            border: 1px solid #005000;
        }

        .incorrect-box {
            background-color: #8B0000; /* Darker Red */
            color: var(--text-color);
            border: 1px solid #5a0000;
        }

        .review-item p {
            margin: 5px 0;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        
        .review-item strong {
            font-weight: 700;
        }
        /* END NEW STYLES */

        #restart-btn {
            background-color: var(--primary-color);
            color: black; /* Black for contrast */
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 700;
            box-shadow: 0 5px 0 #006400;
            margin-top: 30px;
        }

        #restart-btn:hover {
            background-color: #006400;
        }

        #restart-btn:active {
            transform: translateY(2px);
            box-shadow: 0 3px 0 #006400;
        }

        /* Footer Styles */
        .footer {
            width: 100%;
            padding: 15px 0;
            background: #111;
            color: #777;
            font-size: 0.8rem;
            margin-top: 30px; /* Space between content and footer */
            z-index: 5;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            #question-text {
                font-size: 1rem;
            }
            .btn {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
            .score-info {
                flex-direction: column;
                gap: 10px;
            }
            .message-content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>

    <div class="main-content">
        <div class="quiz-container">
            <h1>Football Trivia Challenge</h1>
            
            <div id="start-screen" class="start-screen">
                <h2 id="selection-header">Choose Your Challenge Category</h2>
                <div id="category-buttons" class="answer-buttons category-buttons">
                    </div>
                <button id="back-to-category-btn" style="display: none;" onclick="showCategorySelection()">Back to Categories</button>
            </div>

            <div id="quiz-area" style="display: none;">
                <div id="question-text">Loading question...</div>
                <div class="answer-buttons" id="answer-buttons">
                    </div>
                <div class="score-info">
                    <div class="question-counter" id="question-counter">Question 1/50</div>
                    <div class="score-box">Score: <span id="current-score">0</span></div>
                </div>
            </div>
        </div>
    </div>

    <div id="message-box">
        <div class="message-content" id="message-content">
            </div>
    </div>
    
    <footer class="footer">
        Developed by **Kevin and Surendar (G7A)**
    </footer>
    <script>
        // Use a random UUID generator for session ID
        const SESSION_ID = crypto.randomUUID();
        
        // --- QUIZ STATE VARIABLES ---
        let score = 0;
        let currentQuestionIndex = 0;
        let quizQuestions = [];
        let selectedCategoryKey = null;
        let selectedDifficulty = null;
        
        // ‚öΩ Array to store the results for the detailed review screen
        let quizResultsLog = []; 
        // -----------------------------

        // Options used for some placeholder questions
        const clubOptions = ["Real Madrid", "FC Barcelona", "Manchester United", "Liverpool", "Bayern Munich"];
        
        // --- QUIZ DATA CATEGORIZED BY DIFFICULTY (50 PLACEHOLDERS PER LEVEL) ---
        
        // Function to generate 50 placeholder questions for a given level
        function generatePlaceholderQuestions(category, difficulty) {
            const questions = [];
            for (let i = 1; i <= 50; i++) {
                questions.push({
                    question: `[${category} ${difficulty}] Placeholder Question ${i}: Which city is the home of the world's largest stadium?`,
                    correctAnswer: "Pyongyang",
                    options: ["Madrid", "Barcelona", "Pyongyang", "Mexico City"]
                });
            }
            return questions;
        }

        const categorizedQuizData = {
            "world_football": {
                title: "World Football Trivia",
                questions: {
                    // NOTE: Use the `generatePlaceholderQuestions` function here or replace with your 50 real questions
                    "BEGINNER": generatePlaceholderQuestions("World", "Beginner"),
                    "INTERMEDIATE": generatePlaceholderQuestions("World", "Intermediate"),
                    "ADVANCED": generatePlaceholderQuestions("World", "Advanced"),
                }
            },
            "major_clubs": {
                title: "Major European Clubs",
                questions: {
                     // NOTE: Use the `generatePlaceholderQuestions` function here or replace with your 50 real questions
                     "BEGINNER": generatePlaceholderQuestions("Clubs", "Beginner"),
                    "INTERMEDIATE": generatePlaceholderQuestions("Clubs", "Intermediate"),
                    "ADVANCED": generatePlaceholderQuestions("Clubs", "Advanced"),
                }
            }
        };
        // --- END QUIZ DATA ---

        // Helper function to shuffle an array (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // Helper function to get the current date/time for the header
        function getFormattedDateTime() {
            const now = new Date();
            const date = now.toLocaleDateString('en-US', { day: '2-digit', month: '2-digit', year: 'numeric' });
            const time = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
            return `${date.replace(/\//g, '-')} at ${time}`;
        }
        
        // --- GAME FLOW FUNCTIONS ---

        function showCategorySelection() {
            // Reset game state
            score = 0;
            currentQuestionIndex = 0;
            quizQuestions = [];
            quizResultsLog = []; // IMPORTANT: Clear log on restart/category change
            selectedCategoryKey = null;
            selectedDifficulty = null;

            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('message-box').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
            document.getElementById('selection-header').textContent = "Choose Your Challenge Category";
            document.getElementById('back-to-category-btn').style.display = 'none';

            const categoryButtonsContainer = document.getElementById('category-buttons');
            categoryButtonsContainer.innerHTML = '';
            categoryButtonsContainer.className = 'answer-buttons category-buttons';

            Object.keys(categorizedQuizData).forEach(key => {
                const button = document.createElement('button');
                button.classList.add('btn');
                button.textContent = categorizedQuizData[key].title;
                button.onclick = () => showDifficultySelection(key);
                categoryButtonsContainer.appendChild(button);
            });
        }

        function showDifficultySelection(categoryKey) {
            selectedCategoryKey = categoryKey;
            
            document.getElementById('selection-header').textContent = `Select Difficulty for ${categorizedQuizData[categoryKey].title}`;
            document.getElementById('back-to-category-btn').style.display = 'block';

            const difficultyButtonsContainer = document.getElementById('category-buttons');
            difficultyButtonsContainer.innerHTML = '';
            difficultyButtonsContainer.className = 'answer-buttons difficulty-buttons'; // Change class for difficulty styling

            const difficulties = Object.keys(categorizedQuizData[categoryKey].questions);

            difficulties.forEach(difficulty => {
                const button = document.createElement('button');
                button.classList.add('btn');
                // Format difficulty key nicely
                button.textContent = difficulty.charAt(0).toUpperCase() + difficulty.slice(1).toLowerCase();
                button.onclick = () => startQuiz(difficulty);
                difficultyButtonsContainer.appendChild(button);
            });
        }

        function startQuiz(difficulty) {
            selectedDifficulty = difficulty;
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-area').style.display = 'block';
            
            // Get the entire pool of questions for the selected level
            let questionsPool = [...categorizedQuizData[selectedCategoryKey].questions[selectedDifficulty]];
            shuffleArray(questionsPool);
            
            // Use the entire pool (all 50 questions)
            quizQuestions = questionsPool; 

            showQuestion();
        }

        function showQuestion() {
            const currentQuestion = quizQuestions[currentQuestionIndex];
            document.getElementById('question-text').textContent = currentQuestion.question;
            document.getElementById('question-counter').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length}`;

            const answerButtonsContainer = document.getElementById('answer-buttons');
            answerButtonsContainer.innerHTML = '';
            
            // Combine correct answer and incorrect options, then shuffle them
            let options = [...currentQuestion.options];
            shuffleArray(options);

            options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('btn');
                button.textContent = option;
                // Use a closure to pass the selected option to selectAnswer
                button.onclick = () => selectAnswer(option);
                answerButtonsContainer.appendChild(button);
            });
        }

        function selectAnswer(selectedOption) {
            const currentQuestion = quizQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.correctAnswer;
            const answerButtons = document.getElementById('answer-buttons').children;
            
            // 1. Disable all buttons for the immediate transition
            Array.from(answerButtons).forEach(button => {
                button.disabled = true;
            });

            // 2. Update score (SILENTLY)
            if (isCorrect) {
                score++;
                document.getElementById('current-score').textContent = score; 
            }
            
            // üèÜ LOG THE RESULT FOR THE DETAILED REVIEW SCREEN
            quizResultsLog.push({
                index: currentQuestionIndex + 1,
                question: currentQuestion.question,
                yourAnswer: selectedOption,
                correctAnswer: currentQuestion.correctAnswer,
                isCorrect: isCorrect,
                explanation: `The correct answer is **${currentQuestion.correctAnswer}**.`, 
            });
            // -----------------------------------------------------------------

            // 3. Move to the next question immediately
            currentQuestionIndex++;
            if (currentQuestionIndex < quizQuestions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function endQuiz() {
            document.getElementById('quiz-area').style.display = 'none';

            const messageBox = document.getElementById('message-box');
            const messageContent = document.getElementById('message-content');
            
            // üèÜ GENERATE THE DETAILED REVIEW SCREEN CONTENT
            const categoryTitle = categorizedQuizData[selectedCategoryKey].title;
            const difficultyTitle = selectedDifficulty.charAt(0).toUpperCase() + selectedDifficulty.slice(1).toLowerCase();
            const totalQuestions = quizQuestions.length;
            const formattedDateTime = getFormattedDateTime();
            
            // Base structure for the result box
            messageContent.innerHTML = `
                <p style="font-size: 0.9rem; color: #aaa; margin-bottom: 5px;">Level: **${difficultyTitle}** (${categoryTitle})</p>
                <p style="font-size: 0.9rem; color: #aaa; margin-top: 0; margin-bottom: 25px;">Submitted on: ${formattedDateTime}</p>
                
                <h2 style="font-size: 2.5rem; margin-top: 0; padding: 15px 0; border-radius: 10px; background: #333;">
                    Score: ${score}/${totalQuestions}
                </h2>
                
                <p style="font-size: 1.1rem; color: ${score >= totalQuestions / 2 ? 'var(--primary-color)' : 'var(--wrong-color)'}; margin-bottom: 30px;">
                    ${score === totalQuestions ? '‚≠ê Perfect Score! You are a Football Master! ‚≠ê' : score > totalQuestions / 2 ? 'Great effort! You know your stuff.' : 'Don\'t give up. Try again!'}
                </p>
                
                <div id="detailed-review-list" style="max-height: 50vh; overflow-y: auto; text-align: left; padding-right: 15px;">
                    </div>
                
                <button id="restart-btn" onclick="showCategorySelection()">Change Category</button>
            `;

            const reviewListContainer = document.getElementById('detailed-review-list');
            
            // Loop through the log and build the review items
            quizResultsLog.forEach(result => {
                const resultClass = result.isCorrect ? 'correct-box' : 'incorrect-box';
                const icon = result.isCorrect ? '‚úÖ' : '‚ùå';
                
                const reviewItem = document.createElement('div');
                reviewItem.classList.add('review-item', resultClass);
                
                // Content for the review item, which now includes the correct answer
                reviewItem.innerHTML = `
                    <p style="font-weight: 700; margin-top: 0;">${icon} ${result.index}. ${result.question}</p>
                    <p style="margin-left: 20px;">Your Answer: <strong>${result.yourAnswer}</strong></p>
                    <p style="margin-left: 20px; color: ${result.isCorrect ? 'black' : '#f7b32c'};">Correct Answer: <strong>${result.correctAnswer}</strong></p>
                    <p style="font-style: italic; font-size: 0.9rem; margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 5px;">
                        Explanation: This is the definitive answer for the question.
                    </p>
                `;
                reviewListContainer.appendChild(reviewItem);
            });
            
            // Show the modal
            messageBox.style.display = 'flex';
            setTimeout(() => {
                messageContent.classList.add('show');
            }, 10);
        }
        
        // Initialize the game
        window.onload = showCategorySelection;
    </script>
</body>
</html>
